{% extends 'base.html' %}
{% load static %}
{% load cloudinary %}
{% block title %}Account{% endblock title %}
{% block content %}
      <!-- Page Header -->
      <div class="container-fuild">
        <div class="page-header" >
          <div class="container">
            <h1 class="page-title">Dashboard<span>Introduce Yourself</span></h1>
          </div><!-- End .container -->
        </div>
        <nav aria-label="breadcrumb">
          <div class="container">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="{% url 'store' %}">Home</a></li>
              <li class="breadcrumb-item active" aria-current="page">Dashboard</li>
            </ol>
          </div>
        </nav>
      
      
      </div>
 <!-- Dashbord Content -->
       <div class="pro-content checkout-area">
             
        <div class="container"> 
          <div class="row">
              <div class="col-12 col-xl-12">
                  <div class="row">
                      <div class="col-12 col-lg-3 ">
                       <div class="checkoutd-nav">
                          <ul class="nav flex-column nav-pills mb-3" id="pills-tab" role="tablist">
                              <li class="nav-item">
                                <a class="nav-link  active" id="pills-shipping-tab" data-toggle="pill" 
                                href="#pills-shipping" role="tab" aria-controls="pills-shipping" 
                                aria-selected="true">Profile</a>
                              </li>
                              <li class="nav-item">
                                <a class="nav-link " id="pills-billing-tab" data-toggle="pill" 
                                href="#pills-billing" role="tab" aria-controls="pills-billing" 
                                aria-selected="false">Orders</a>
                              </li>
                            </ul>
                       </div>
                 
                    </div>
                    <div class="col-12 col-lg-9">
                        <div class="checkout-module">
                   
                        
                            <div class="tab-content" >
                              <div class="tab-pane fade show active" id="pills-shipping" role="tabpanel" aria-labelledby="pills-shipping-tab">
                                   
                              <!-- Profile Content -->
                              <section class="profile-content">
                                      <div class="heading-title">
                                          <h2> Personal Information
                                          </h2>
                                        </div>
                                    <form method="POST" action="">
                                      {% csrf_token %}
                                        <div class="form-row">
                                            <div class="from-group col-md-12 mb-3">
                                                <div class="input-group ">
                                                  
                                                  <input type="text" name="username" id="inputusername" class="form-control" placeholder='username'  autofocus
                                                    value="{{form.initial.username}}">
                                                </div>
                                              </div>
                                              <div class="from-group col-md-12 mb-3">
                                                <div class="input-group ">
                                                  
                                                <input type="email" name="email" id="inputEmail" class="form-control" placeholder='Email address'  autofocus
                                                  value="{{form.initial.email}}">
                                                </div>
                                              </div>  
                                              <div class="from-group col-md-12 mb-3">
                                                <div class="input-group ">
                                              
                                                  <input type="text" name="first_name" id="inputFirstName" class="form-control" placeholder='First name' autofocus
                                                    value="{{form.initial.first_name}}">
                                                </div>
                                              </div>
                                              <div class="from-group col-md-12 mb-3">
                                                <div class="input-group ">
                                              
                                                  <input type="text" name="last_name" id="inputLastName" class="form-control" placeholder='Last Name' autofocus
                                                    value="{{form.initial.last_name}}">
                                                </div>
                                              </div>
                                              <div class="from-group col-md-12 mb-3">
                                                <div class="input-group ">
                                              
                                                  <input type="text" name="phone_number" id="inputPhoneNumber" class="form-control" placeholder='Phone Number' autofocus
                                                    value="{{form.initial.phone_number}}">
                                                </div>
                                              </div>
                                        </div>
                                              <button type="submit" class="btn btn-secondary">Update</button>
                                    </form>
                                </section>
                              </div>
                              <div class="tab-pane fade" id="pills-billing" role="tabpanel" aria-labelledby="pills-billing-tab">
                                {% for order in orders %}
                                  <section class="order-content">
                                      <div class="heading-title">
                                          <h2> Orders
                                          </h2>
                                        </div>
                                        
                                       
                                       
                                          <div class="accordian">
                                              <table class="table top-table order-table">
                                                  <tbody>
                                                    <tr class="d-flex">
                                                      <td class="col-12 col-md-3 first-item">  
                                                          {{order.date_orderd}}
                                                      </td>
                                                      <td class="col-12 col-md-2">{{order.tansaction_id}}</td>
                                                      <td class="col-12 col-md-3">
                                                          <div class="text-secondary">{{order.status}}</div>
                                                        </td>
                                                      <td class="col-12 col-md-2">
                                                        ${{order.get_cart_total_after_discount}}
                                                      </td>
                                                      <td class="col-12 col-md-2">
                                                          <a class="btn btn btn-link" data-toggle="collapse" href="#orderDetail2{{order.id}}" role="button" aria-expanded="false">
                                                            View
                                                            </a>
                                                      
                                                        </td>
                                               
                                                    </tr>
                                                    </tbody>
                                              </table>
                                              <div class="collapse" id="orderDetail2{{order.id}}">
                                                  <div class="card card-body">
                                                      <section class="orderdetail-content">
                                        
                                                          <div class="row">
                                                            <div class="col-12 col-md-5">
                                                                <h3>Order ID {{order.id}}</h3>
                                                                <table class="table order-id">
                                                                    <tbody>
                                                                        <tr class="d-flex">
                                                                          <td class="col-6 col-md-6"> <strong>Order Status</strong> </td>
                                                                          <td class="pending col-6 col-md-6" ><p>{{order.status}}</p></td>
                                                                        </tr>
                                                                        <tr class="d-flex">
                                                                            <td class="col-6 col-md-6"><strong>Order Date</strong></td>
                                                                            <td  class="underline col-6 col-md-6" >{{order.date_orderd}}</td>
                                                                          </tr>
                                                                      </tbody>
                                                                </table>
                                          
                                                            </div> 
                                                            {% if order.coupon %}
                                                            <div class="col-12 col-md-7"> 
                                                              <h3>Discount</h3>
                                                                  <td class="text-secondary">Coupon code : {{order.coupon.code}}</td> 
                                                                  <br>
                                                                  <td class="text-secondary"> Amount : {{order.coupon.discount}}% Cash : {{order.get_discount}}$</td>
                                                                
                                                                
                                                            </div>   
                                                            {% endif %}
                                                            
                                                          </div>
                                          
                                                            <table class="table orderdetail-content top-table">
                                                                <tbody>
                                                                  
                                                                  {% for item in order.orderitem_set.all %}
                                                                    
                                                                 
                                                                    <tr class="d-flex">
                                                                        <td class="col-12 col-md-2">
                                                                          <img class="img-fluid" src="{{item.product.image.url}}" alt="CartImage">
                                                                        </td>
                                                                        <td class="col-12 col-md-4">
                                                                            <div class="item-detail">
                                                                                <span class="pro-category">{{item.product.catagory}}</span>
                                                                                <h3>{{item.product.name}}
                                                                                </h3>
                                                                                <div class="item-attributes"></div>
                                                                                
                                                                            </div>
                                                                        </td>
                                                                        
                                                                        {% if item.product.discount %}
                                                                          <td class="col-12 col-md-1 item-price">${{item.product.new_price}}</td>
                                                                        {% else %}
                                                                        <td class="col-12 col-md-1 item-price">${{item.product.price}}</td>
                                                                          {% endif %}
                                                                        <td class="col-12 col-md-3" >
                                                                            <div class="input-group-control">
                                              <span type="number" class="form-control">{{item.quantity}}</span>
                                                                          </div>
                                                                        </td>
                                                                        <td class="col-12 col-md-2 item-total">${{item.get_total}}</td>
                                                                        
                                                                     
                                                                      
                                                                    </tr>
                                                                    {% endfor %}
                                                                </tbody>
                                                              </table>
                                          

                                                </section>
                                                  </div>
                                                </div>
                                          </div>
                                         
                                    </section>
                                    {% endfor %}
                            </div>
                        </div>
                    </div>

                  </div>
              </div>
       
          </div>
        </div>
       </div>
       </div>
{% endblock content %}